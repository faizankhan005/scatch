<%- include('./partials/header') %>

<% user.cart.forEach(function(item){ 
    const price = Number(item.price) || 0;
    const discount = Number(item.discount) || 0;
    const shipping = 20; // flat fee
    const netTotal = price - discount + shipping;
%>

<div class="w-full min-h-screen flex items-start px-20 py-20 gap-12 bg-gray-50">

    <!-- Product Card -->
    <div class="w-[30%] rounded-2xl overflow-hidden shadow-xl bg-white transition-all duration-300 hover:shadow-2xl hover:-translate-y-2">

        <div class="w-full h-80 flex justify-center items-center bg-[<%= item.bgcolor %>] relative overflow-hidden">
            <img 
                class="h-[18rem] transition-transform duration-500 hover:scale-110"
                src="data:image/jpeg;base64,<%= item.image.toString('base64') %>" 
                alt=""
            >
            <div class="absolute inset-0 bg-black/10 opacity-0 hover:opacity-100 transition-opacity duration-300"></div>
        </div>

        <div class="w-full flex justify-between items-center px-6 py-5 bg-[<%= item.panelcolor %>] text-[<%= item.textcolor %>]">
            <h3 class="text-2xl font-semibold tracking-wide"><%= item.name %></h3>
            <div class="flex items-center gap-3">
                <button class="w-8 h-8 bg-white text-black flex rounded-full items-center justify-center shadow hover:scale-110 transition-all duration-200">
                    <i class="ri-add-line"></i>
                </button>
                <div class="px-3 py-1 rounded-md bg-white text-black font-medium shadow">1</div>
                <button class="w-8 h-8 bg-white text-black flex rounded-full items-center justify-center shadow hover:scale-110 transition-all duration-200">
                    <i class="ri-subtract-line"></i>
                </button>
            </div>
        </div>

        <div class="flex items-center justify-between px-6 py-4 border-t">
            <h4 class="text-lg font-medium text-gray-700">Net Total</h4>
            <h2 class="text-lg font-semibold text-green-600">₹ <%= netTotal %></h2>
        </div>
    </div>

    <!-- Price Breakdown -->
    <div class="w-[70%] bg-white rounded-2xl shadow-xl p-10 transition-all duration-300 hover:shadow-2xl">

        <h3 class="text-2xl font-semibold mb-6">Price Breakdown</h3>

        <div class="space-y-4">
            <div class="flex justify-between">
                <h4 class="text-gray-700">Total MRP</h4>
                <h4 class="font-medium">₹ <%= price %></h4>
            </div>
            <div class="flex justify-between">
                <h4 class="text-gray-700">Discount on MRP</h4>
                <h4 class="font-medium text-red-500">- ₹ <%= discount %></h4>
            </div>
            <div class="flex justify-between">
                <h4 class="text-gray-700">Platform Fee</h4>
                <h4 class="font-medium">₹ 20</h4>
            </div>
            <div class="flex justify-between">
                <h4 class="text-gray-700">Shipping Fee</h4>
                <h4 class="font-medium text-green-600">FREE</h4>
            </div>
        </div>

        <div class="w-full h-[1px] bg-gray-300 my-8"></div>

        <div class="flex justify-between items-center">
            <h3 class="text-2xl font-semibold">Total Amount</h3>
            <h3 class="text-2xl font-bold text-green-600">₹ <%= netTotal %></h3>
        </div>

        <form action="" class="mt-8">
            <button class="w-full py-4 rounded-xl bg-black text-white font-semibold text-lg hover:bg-gray-900 transition-all duration-300">
                Proceed to Checkout
            </button>
        </form>
    </div>

</div>

<% }) %>

<%- include('./partials/footer') %>
