<%- include('./partials/header') %>

    <% if (success && success.length> 0) { %>
        <div class="fixed top-6 left-1/2 -translate-x-1/2 z-50 p-4 rounded-xl bg-blue-600 shadow-xl animate-bounce">
            <span class="text-white font-medium">
                <%= success[0] %>
            </span>
        </div>
        <% } %>

            <div class="w-full min-h-screen flex items-start px-20 py-20 bg-gray-50">
                <!-- Sidebar -->
                <div class="w-[25%] flex flex-col gap-12 sticky top-20">
                    <div class="flex items-center gap-3">
                        <h3 class="text-lg font-semibold">Sort by</h3>
                        <form action="/shop">
                            <select
                                class="border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-400">
                                <option value="popular">Popular</option>
                                <option value="newest">Newest</option>
                            </select>
                        </form>
                    </div>

                    <div class="flex flex-col text-gray-700">
                        <a class="block w-fit mb-3 hover:text-blue-500 transition-all duration-200" href="#">New
                            Collection</a>
                        <a class="block w-fit mb-3 hover:text-blue-500 transition-all duration-200" href="#">All
                            Products</a>
                        <a class="block w-fit mb-3 hover:text-blue-500 transition-all duration-200" href="#">Discounted
                            Products</a>
                    </div>

                    <div class="flex flex-col text-gray-700">
                        <a class="block w-fit mb-3 font-medium">Filter by :</a>
                        <a class="block w-fit mb-3 hover:text-blue-500 transition-all duration-200"
                            href="#">Availability</a>
                        <a class="block w-fit mb-3 hover:text-blue-500 transition-all duration-200"
                            href="#">Discount</a>
                    </div>
                </div>

                <!-- Products Grid -->
                <div class="w-[75%] flex flex-col gap-8">
                    <div class="grid grid-cols-4 gap-8">
                        <% products.forEach(function(product){ %>
                            <div
                                class="w-full rounded-2xl overflow-hidden shadow-lg bg-white transition-all duration-300 hover:shadow-2xl hover:-translate-y-2 group">

                                <!-- Image Section -->
                                <div class="w-full h-52 flex items-center justify-center relative"
                                    style="background-color: <%= product.bgcolor || '#f3f4f6' %>;">
                                    <img class="h-[12rem] transition-transform duration-500 group-hover:scale-110"
                                        src="<%= product.image ? 'data:image/jpeg;base64,' + product.image.toString('base64') : '/images/placeholder.png' %>"
                                        alt="<%= product.name %>">
                                    <div
                                        class="absolute inset-0 bg-black/10 opacity-0 group-hover:opacity-100 transition-opacity duration-300">
                                    </div>
                                </div>

                                <!-- Product Info -->
                                <div class="flex justify-between items-center px-4 py-4"
                                    style="background-color: <%= product.panelcolor || '#e5e7eb' %>; color: <%= product.textcolor || '#000' %>;">
                                    <div>
                                        <h3 class="text-lg font-semibold tracking-wide">
                                            <%= product.name %>
                                        </h3>
                                        <h4 class="text-md font-medium mt-1">
                                            â‚¹ <%= product.price %>
                                        </h4>
                                    </div>

                                    <!-- Add to Cart Button -->
                                    <a class="w-10 h-10 flex items-center justify-center rounded-full bg-white shadow-md hover:bg-blue-500 hover:text-white transition-all duration-300 hover:scale-110"
                                        href="/addtocart/<%= product._id %>">
                                        <i class="ri-add-line text-xl"></i>
                                    </a>
                                </div>
                            </div>
                            <% }) %>
                    </div>
                </div>

            </div>

            <%- include('./partials/footer') %>